{"ast":null,"code":"import React from 'react';\nimport { notifyManager, useQueryClient } from 'react-query';\n/**\n * Get the state of the dataProvider connection.\n *\n * Returns true if a query or a mutation is pending.\n *\n * Custom implementation because react-query's useIsFetching and useIsMutating\n * render each time the number of active queries changes, which is too often.\n *\n * @see useIsFetching\n * @see useIsMutating\n */\nexport var useLoading = function () {\n  var client = useQueryClient();\n  var mountedRef = React.useRef(false);\n  var isFetchingRef = React.useRef(client.isFetching() > 0);\n  var isMutatingRef = React.useRef(client.isMutating() > 0);\n  var _a = React.useState(isFetchingRef.current || isMutatingRef.current),\n    isLoading = _a[0],\n    setIsLoading = _a[1];\n  React.useEffect(function () {\n    mountedRef.current = true;\n    var unsubscribeQueryCache = client.getQueryCache().subscribe(notifyManager.batchCalls(function () {\n      if (mountedRef.current) {\n        isFetchingRef.current = client.isFetching() > 0;\n        setIsLoading(isFetchingRef.current || isMutatingRef.current);\n      }\n    }));\n    var unsubscribeMutationCache = client.getMutationCache().subscribe(notifyManager.batchCalls(function () {\n      if (mountedRef.current) {\n        isMutatingRef.current = client.isMutating() > 0;\n        setIsLoading(isFetchingRef.current || isMutatingRef.current);\n      }\n    }));\n    return function () {\n      mountedRef.current = false;\n      unsubscribeQueryCache();\n      unsubscribeMutationCache();\n    };\n  }, [client]);\n  return isLoading;\n};","map":{"version":3,"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,SAASC,aAAa,EAAEC,cAAc,QAAQ,aAAa;AAE3D;;;;;;;;;;;AAWA,OAAO,IAAMC,UAAU,GAAG;EACtB,IAAMC,MAAM,GAAGF,cAAc,EAAE;EAC/B,IAAMG,UAAU,GAAGL,KAAK,CAACM,MAAM,CAAC,KAAK,CAAC;EACtC,IAAMC,aAAa,GAAGP,KAAK,CAACM,MAAM,CAACF,MAAM,CAACI,UAAU,EAAE,GAAG,CAAC,CAAC;EAC3D,IAAMC,aAAa,GAAGT,KAAK,CAACM,MAAM,CAACF,MAAM,CAACM,UAAU,EAAE,GAAG,CAAC,CAAC;EAErD,SAA4BV,KAAK,CAACW,QAAQ,CAC5CJ,aAAa,CAACK,OAAO,IAAIH,aAAa,CAACG,OAAO,CACjD;IAFMC,SAAS;IAAEC,YAAY,QAE7B;EAEDd,KAAK,CAACe,SAAS,CAAC;IACZV,UAAU,CAACO,OAAO,GAAG,IAAI;IAEzB,IAAMI,qBAAqB,GAAGZ,MAAM,CAACa,aAAa,EAAE,CAACC,SAAS,CAC1DjB,aAAa,CAACkB,UAAU,CAAC;MACrB,IAAId,UAAU,CAACO,OAAO,EAAE;QACpBL,aAAa,CAACK,OAAO,GAAGR,MAAM,CAACI,UAAU,EAAE,GAAG,CAAC;QAC/CM,YAAY,CACRP,aAAa,CAACK,OAAO,IAAIH,aAAa,CAACG,OAAO,CACjD;;IAET,CAAC,CAAC,CACL;IAED,IAAMQ,wBAAwB,GAAGhB,MAAM,CAACiB,gBAAgB,EAAE,CAACH,SAAS,CAChEjB,aAAa,CAACkB,UAAU,CAAC;MACrB,IAAId,UAAU,CAACO,OAAO,EAAE;QACpBH,aAAa,CAACG,OAAO,GAAGR,MAAM,CAACM,UAAU,EAAE,GAAG,CAAC;QAC/CI,YAAY,CACRP,aAAa,CAACK,OAAO,IAAIH,aAAa,CAACG,OAAO,CACjD;;IAET,CAAC,CAAC,CACL;IAED,OAAO;MACHP,UAAU,CAACO,OAAO,GAAG,KAAK;MAC1BI,qBAAqB,EAAE;MACvBI,wBAAwB,EAAE;IAC9B,CAAC;EACL,CAAC,EAAE,CAAChB,MAAM,CAAC,CAAC;EAEZ,OAAOS,SAAS;AACpB,CAAC","names":["React","notifyManager","useQueryClient","useLoading","client","mountedRef","useRef","isFetchingRef","isFetching","isMutatingRef","isMutating","useState","current","isLoading","setIsLoading","useEffect","unsubscribeQueryCache","getQueryCache","subscribe","batchCalls","unsubscribeMutationCache","getMutationCache"],"sources":["/Users/paigedeveau/Desktop/se-diva-docs-frontend/bwmdn-admin-portal/node_modules/ra-core/src/dataProvider/useLoading.ts"],"sourcesContent":["import React from 'react';\n\nimport { notifyManager, useQueryClient } from 'react-query';\n\n/**\n * Get the state of the dataProvider connection.\n *\n * Returns true if a query or a mutation is pending.\n *\n * Custom implementation because react-query's useIsFetching and useIsMutating\n * render each time the number of active queries changes, which is too often.\n *\n * @see useIsFetching\n * @see useIsMutating\n */\nexport const useLoading = (): boolean => {\n    const client = useQueryClient();\n    const mountedRef = React.useRef(false);\n    const isFetchingRef = React.useRef(client.isFetching() > 0);\n    const isMutatingRef = React.useRef(client.isMutating() > 0);\n\n    const [isLoading, setIsLoading] = React.useState<boolean>(\n        isFetchingRef.current || isMutatingRef.current\n    );\n\n    React.useEffect(() => {\n        mountedRef.current = true;\n\n        const unsubscribeQueryCache = client.getQueryCache().subscribe(\n            notifyManager.batchCalls(() => {\n                if (mountedRef.current) {\n                    isFetchingRef.current = client.isFetching() > 0;\n                    setIsLoading(\n                        isFetchingRef.current || isMutatingRef.current\n                    );\n                }\n            })\n        );\n\n        const unsubscribeMutationCache = client.getMutationCache().subscribe(\n            notifyManager.batchCalls(() => {\n                if (mountedRef.current) {\n                    isMutatingRef.current = client.isMutating() > 0;\n                    setIsLoading(\n                        isFetchingRef.current || isMutatingRef.current\n                    );\n                }\n            })\n        );\n\n        return () => {\n            mountedRef.current = false;\n            unsubscribeQueryCache();\n            unsubscribeMutationCache();\n        };\n    }, [client]);\n\n    return isLoading;\n};\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}