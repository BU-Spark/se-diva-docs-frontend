{"ast":null,"code":"var __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport * as React from 'react';\nimport { usePreference, useTranslate } from 'ra-core';\nimport { Box, Button } from '@mui/material';\nimport { FieldToggle } from './FieldToggle';\n/**\n * UI to select / deselect fields, and store the selection in preferences\n */\nexport var FieldsSelector = function (_a) {\n  var _b = _a.name,\n    name = _b === void 0 ? 'columns' : _b,\n    _c = _a.availableName,\n    availableName = _c === void 0 ? 'availableColumns' : _c;\n  var translate = useTranslate();\n  var _d = usePreference(availableName, []),\n    availableFields = _d[0],\n    setAvailableFields = _d[1];\n  var omit = usePreference('omit', [])[0];\n  var _e = usePreference(name, availableFields.filter(function (field) {\n      return !(omit === null || omit === void 0 ? void 0 : omit.includes(field.source));\n    }).map(function (field) {\n      return field.index;\n    })),\n    fields = _e[0],\n    setFields = _e[1];\n  var handleToggle = function (event) {\n    if (event.target.checked) {\n      // add the column at the right position\n      setFields(availableFields.filter(function (field) {\n        return field.index === event.target.name || fields.includes(field.index);\n      }).map(function (field) {\n        return field.index;\n      }));\n    } else {\n      setFields(fields.filter(function (index) {\n        return index !== event.target.name;\n      }));\n    }\n  };\n  var handleMove = function (index1, index2) {\n    var index1Pos = availableFields.findIndex(\n    // eslint-disable-next-line eqeqeq\n    function (field) {\n      return field.index == index1;\n    });\n    var index2Pos = availableFields.findIndex(\n    // eslint-disable-next-line eqeqeq\n    function (field) {\n      return field.index == index2;\n    });\n    if (index1Pos === -1 || index2Pos === -1) {\n      return;\n    }\n    var newAvailableFields;\n    if (index1Pos > index2Pos) {\n      newAvailableFields = __spreadArray(__spreadArray(__spreadArray(__spreadArray([], availableFields.slice(0, index2Pos), true), [availableFields[index1Pos]], false), availableFields.slice(index2Pos, index1Pos), true), availableFields.slice(index1Pos + 1), true);\n    } else {\n      newAvailableFields = __spreadArray(__spreadArray(__spreadArray(__spreadArray([], availableFields.slice(0, index1Pos), true), availableFields.slice(index1Pos + 1, index2Pos + 1), true), [availableFields[index1Pos]], false), availableFields.slice(index2Pos + 1), true);\n    }\n    setAvailableFields(newAvailableFields);\n    setFields(function (fields) {\n      return newAvailableFields.filter(function (field) {\n        return fields.includes(field.index);\n      }).map(function (field) {\n        return field.index;\n      });\n    });\n  };\n  var handleHideAll = function () {\n    setFields([]);\n  };\n  var handleShowAll = function () {\n    setFields(availableFields.map(function (field) {\n      return field.index;\n    }));\n  };\n  return React.createElement(Box, {\n    pt: 0.5\n  }, availableFields.map(function (field) {\n    return React.createElement(FieldToggle, {\n      key: field.index,\n      source: field.source,\n      label: field.label,\n      index: field.index,\n      selected: fields.includes(field.index),\n      onToggle: handleToggle,\n      onMove: handleMove\n    });\n  }), React.createElement(Box, {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    mx: -0.5,\n    mt: 1\n  }, React.createElement(Button, {\n    size: \"small\",\n    onClick: handleHideAll\n  }, translate('ra.inspector.hideAll', {\n    _: 'Hide All'\n  })), React.createElement(Button, {\n    size: \"small\",\n    onClick: handleShowAll\n  }, translate('ra.inspector.showAll', {\n    _: 'Show All'\n  }))));\n};","map":{"version":3,"mappings":";;;;;;;;;AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,aAAa,EAAEC,YAAY,QAAQ,SAAS;AACrD,SAASC,GAAG,EAAEC,MAAM,QAAQ,eAAe;AAE3C,SAASC,WAAW,QAAQ,eAAe;AAE3C;;;AAGA,OAAO,IAAMC,cAAc,GAAG,UAACC,EAG9B;MAFGC,YAAgB;IAAhBC,IAAI,mBAAG,SAAS;IAChBC,qBAAkC;IAAlCC,aAAa,mBAAG,kBAAkB;EAElC,IAAMC,SAAS,GAAGV,YAAY,EAAE;EAE1B,SAAwCD,aAAa,CAEzDU,aAAa,EAAE,EAAE,CAAC;IAFbE,eAAe;IAAEC,kBAAkB,QAEtB;EACb,QAAI,GAAIb,aAAa,CAAC,MAAM,EAAE,EAAE,CAAC,GAA7B;EAEL,SAAsBA,aAAa,CACrCQ,IAAI,EACJI,eAAe,CACVE,MAAM,CAAC,eAAK;MAAI,SAACC,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEC,QAAQ,CAACC,KAAK,CAACC,MAAM,CAAC;IAA7B,CAA6B,CAAC,CAC9CC,GAAG,CAAC,eAAK;MAAI,YAAK,CAACC,KAAK;IAAX,CAAW,CAAC,CACjC;IALMC,MAAM;IAAEC,SAAS,QAKvB;EAED,IAAMC,YAAY,GAAG,eAAK;IACtB,IAAIC,KAAK,CAACC,MAAM,CAACC,OAAO,EAAE;MACtB;MACAJ,SAAS,CACLV,eAAe,CACVE,MAAM,CACH,eAAK;QACD,YAAK,CAACM,KAAK,KAAKI,KAAK,CAACC,MAAM,CAACjB,IAAI,IACjCa,MAAM,CAACL,QAAQ,CAACC,KAAK,CAACG,KAAK,CAAC;MAD5B,CAC4B,CACnC,CACAD,GAAG,CAAC,eAAK;QAAI,YAAK,CAACC,KAAK;MAAX,CAAW,CAAC,CACjC;KACJ,MAAM;MACHE,SAAS,CAACD,MAAM,CAACP,MAAM,CAAC,eAAK;QAAI,YAAK,KAAKU,KAAK,CAACC,MAAM,CAACjB,IAAI;MAA3B,CAA2B,CAAC,CAAC;;EAEtE,CAAC;EAED,IAAMmB,UAAU,GAAG,UAACC,MAAM,EAAEC,MAAM;IAC9B,IAAMC,SAAS,GAAGlB,eAAe,CAACmB,SAAS;IACvC;IACA,eAAK;MAAI,YAAK,CAACX,KAAK,IAAIQ,MAAM;IAArB,CAAqB,CACjC;IACD,IAAMI,SAAS,GAAGpB,eAAe,CAACmB,SAAS;IACvC;IACA,eAAK;MAAI,YAAK,CAACX,KAAK,IAAIS,MAAM;IAArB,CAAqB,CACjC;IACD,IAAIC,SAAS,KAAK,CAAC,CAAC,IAAIE,SAAS,KAAK,CAAC,CAAC,EAAE;MACtC;;IAEJ,IAAIC,kBAAkB;IACtB,IAAIH,SAAS,GAAGE,SAAS,EAAE;MACvBC,kBAAkB,+DACXrB,eAAe,CAACsB,KAAK,CAAC,CAAC,EAAEF,SAAS,CAAC,UACtCpB,eAAe,CAACkB,SAAS,CAAC,WACvBlB,eAAe,CAACsB,KAAK,CAACF,SAAS,EAAEF,SAAS,CAAC,SAC3ClB,eAAe,CAACsB,KAAK,CAACJ,SAAS,GAAG,CAAC,CAAC,OAC1C;KACJ,MAAM;MACHG,kBAAkB,+DACXrB,eAAe,CAACsB,KAAK,CAAC,CAAC,EAAEJ,SAAS,CAAC,SACnClB,eAAe,CAACsB,KAAK,CAACJ,SAAS,GAAG,CAAC,EAAEE,SAAS,GAAG,CAAC,CAAC,UACtDpB,eAAe,CAACkB,SAAS,CAAC,WACvBlB,eAAe,CAACsB,KAAK,CAACF,SAAS,GAAG,CAAC,CAAC,OAC1C;;IAELnB,kBAAkB,CAACoB,kBAAkB,CAAC;IACtCX,SAAS,CAAC,gBAAM;MACZ,yBAAkB,CACbR,MAAM,CAAC,eAAK;QAAI,aAAM,CAACE,QAAQ,CAACC,KAAK,CAACG,KAAK,CAAC;MAA5B,CAA4B,CAAC,CAC7CD,GAAG,CAAC,eAAK;QAAI,YAAK,CAACC,KAAK;MAAX,CAAW,CAAC;IAF9B,CAE8B,CACjC;EACL,CAAC;EAED,IAAMe,aAAa,GAAG;IAClBb,SAAS,CAAC,EAAE,CAAC;EACjB,CAAC;EACD,IAAMc,aAAa,GAAG;IAClBd,SAAS,CAACV,eAAe,CAACO,GAAG,CAAC,eAAK;MAAI,YAAK,CAACC,KAAK;IAAX,CAAW,CAAC,CAAC;EACxD,CAAC;EAED,OACIrB,oBAACG,GAAG;IAACmC,EAAE,EAAE;EAAG,GACPzB,eAAe,CAACO,GAAG,CAAC,eAAK;IAAI,OAC1BpB,oBAACK,WAAW;MACRkC,GAAG,EAAErB,KAAK,CAACG,KAAK;MAChBF,MAAM,EAAED,KAAK,CAACC,MAAM;MACpBqB,KAAK,EAAEtB,KAAK,CAACsB,KAAK;MAClBnB,KAAK,EAAEH,KAAK,CAACG,KAAK;MAClBoB,QAAQ,EAAEnB,MAAM,CAACL,QAAQ,CAACC,KAAK,CAACG,KAAK,CAAC;MACtCqB,QAAQ,EAAElB,YAAY;MACtBmB,MAAM,EAAEf;IAAU,EACpB;EATwB,CAU7B,CAAC,EACF5B,oBAACG,GAAG;IAACyC,OAAO,EAAC,MAAM;IAACC,cAAc,EAAC,eAAe;IAACC,EAAE,EAAE,CAAC,GAAG;IAAEC,EAAE,EAAE;EAAC,GAC9D/C,oBAACI,MAAM;IAAC4C,IAAI,EAAC,OAAO;IAACC,OAAO,EAAEb;EAAa,GACtCxB,SAAS,CAAC,sBAAsB,EAAE;IAC/BsC,CAAC,EAAE;GACN,CAAC,CACG,EACTlD,oBAACI,MAAM;IAAC4C,IAAI,EAAC,OAAO;IAACC,OAAO,EAAEZ;EAAa,GACtCzB,SAAS,CAAC,sBAAsB,EAAE;IAC/BsC,CAAC,EAAE;GACN,CAAC,CACG,CACP,CACJ;AAEd,CAAC","names":["React","usePreference","useTranslate","Box","Button","FieldToggle","FieldsSelector","_a","_b","name","_c","availableName","translate","availableFields","setAvailableFields","filter","omit","includes","field","source","map","index","fields","setFields","handleToggle","event","target","checked","handleMove","index1","index2","index1Pos","findIndex","index2Pos","newAvailableFields","slice","handleHideAll","handleShowAll","pt","key","label","selected","onToggle","onMove","display","justifyContent","mx","mt","size","onClick","_"],"sourceRoot":"","sources":["../../../src/preferences/FieldsSelector.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}