{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport get from 'lodash/get';\nimport { useGetManyReference } from '../../dataProvider';\nimport { useNotify } from '../../notification';\n/**\n * Fetch a reference record in a one-to-one relationship, and return it when available\n *\n * The reference prop should be the name of one of the <Resource> components\n * added as <Admin> child.\n *\n * @example\n *\n * const { data, isLoading, error } = useReferenceOneFieldController({\n *     record: { id: 7, name: 'James Joyce'}\n *     reference: 'bios',\n *     target: 'author_id',\n * });\n *\n * @typedef {Object} UseReferenceOneFieldControllerParams\n * @prop {Object} props.record The current resource record\n * @prop {string} props.reference The linked resource name\n * @prop {string} props.target The target resource key\n * @prop {string} props.source The key current record identifier ('id' by default)\n * @prop {Object} props.sort The sort to apply to the referenced records\n * @prop {Object} props.filter The filter to apply to the referenced records\n * @returns {UseReferenceResult} The request state. Destructure as { referenceRecord, isLoading, error }.\n */\nexport var useReferenceOneFieldController = function (props) {\n  var reference = props.reference,\n    record = props.record,\n    target = props.target,\n    _a = props.source,\n    source = _a === void 0 ? 'id' : _a,\n    _b = props.sort,\n    sort = _b === void 0 ? {\n      field: 'id',\n      order: 'ASC'\n    } : _b,\n    _c = props.filter,\n    filter = _c === void 0 ? {} : _c,\n    _d = props.queryOptions,\n    queryOptions = _d === void 0 ? {} : _d;\n  var notify = useNotify();\n  var meta = queryOptions.meta,\n    otherQueryOptions = __rest(queryOptions, [\"meta\"]);\n  var _e = useGetManyReference(reference, {\n      target: target,\n      id: get(record, source),\n      pagination: {\n        page: 1,\n        perPage: 1\n      },\n      sort: sort,\n      filter: filter,\n      meta: meta\n    }, __assign({\n      enabled: !!record,\n      onError: function (error) {\n        return notify(typeof error === 'string' ? error : error.message || 'ra.notification.http_error', {\n          type: 'error',\n          messageArgs: {\n            _: typeof error === 'string' ? error : error && error.message ? error.message : undefined\n          }\n        });\n      }\n    }, otherQueryOptions)),\n    data = _e.data,\n    error = _e.error,\n    isFetching = _e.isFetching,\n    isLoading = _e.isLoading,\n    refetch = _e.refetch;\n  return {\n    referenceRecord: data ? data[0] : undefined,\n    error: error,\n    isFetching: isFetching,\n    isLoading: isLoading,\n    refetch: refetch\n  };\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;AAAA,OAAOA,GAAG,MAAM,YAAY;AAG5B,SAASC,mBAAmB,QAAQ,oBAAoB;AACxD,SAASC,SAAS,QAAQ,oBAAoB;AAmB9C;;;;;;;;;;;;;;;;;;;;;;;AAuBA,OAAO,IAAMC,8BAA8B,GAAG,UAG1CC,KAAuD;EAGnD,aAAS,GAOTA,KAAK,UAPI;IACTC,MAAM,GAMND,KAAK,OANC;IACNE,MAAM,GAKNF,KAAK,OALC;IACNG,KAIAH,KAAK,OAJQ;IAAbI,MAAM,mBAAG,IAAI;IACbC,KAGAL,KAAK,KAH+B;IAApCM,IAAI,mBAAG;MAAEC,KAAK,EAAE,IAAI;MAAEC,KAAK,EAAE;IAAK,CAAE;IACpCC,KAEAT,KAAK,OAFM;IAAXU,MAAM,mBAAG,EAAE;IACXC,KACAX,KAAK,aADY;IAAjBY,YAAY,mBAAG,EAAE;EAErB,IAAMC,MAAM,GAAGf,SAAS,EAAE;EAClB,QAAI,GAA2Bc,YAAY,KAAvC;IAAKE,iBAAiB,UAAKF,YAAY,EAA7C,QAA8B,CAAF;EAE5B,SAAkDf,mBAAmB,CAGvEkB,SAAS,EACT;MACIb,MAAM;MACNc,EAAE,EAAEpB,GAAG,CAACK,MAAM,EAAEG,MAAM,CAAC;MACvBa,UAAU,EAAE;QAAEC,IAAI,EAAE,CAAC;QAAEC,OAAO,EAAE;MAAC,CAAE;MACnCb,IAAI;MACJI,MAAM;MACNU,IAAI;KACP;MAEGC,OAAO,EAAE,CAAC,CAACpB,MAAM;MACjBqB,OAAO,EAAE,eAAK;QACV,aAAM,CACF,OAAOC,KAAK,KAAK,QAAQ,GACnBA,KAAK,GACLA,KAAK,CAACC,OAAO,IAAI,4BAA4B,EACnD;UACIC,IAAI,EAAE,OAAO;UACbC,WAAW,EAAE;YACTC,CAAC,EACG,OAAOJ,KAAK,KAAK,QAAQ,GACnBA,KAAK,GACLA,KAAK,IAAIA,KAAK,CAACC,OAAO,GACtBD,KAAK,CAACC,OAAO,GACbI;;SAEjB,CACJ;MAfD;IAeC,GACFd,iBAAiB,EAE3B;IAjCOe,IAAI;IAAEN,KAAK;IAAEO,UAAU;IAAEC,SAAS;IAAEC,OAAO,aAiClD;EAED,OAAO;IACHC,eAAe,EAAEJ,IAAI,GAAGA,IAAI,CAAC,CAAC,CAAC,GAAGD,SAAS;IAC3CL,KAAK;IACLO,UAAU;IACVC,SAAS;IACTC,OAAO;GACV;AACL,CAAC","names":["get","useGetManyReference","useNotify","useReferenceOneFieldController","props","record","target","_a","source","_b","sort","field","order","_c","filter","_d","queryOptions","notify","otherQueryOptions","reference","id","pagination","page","perPage","meta","enabled","onError","error","message","type","messageArgs","_","undefined","data","isFetching","isLoading","refetch","referenceRecord"],"sources":["/Users/paigedeveau/Desktop/se-diva-docs-frontend/bwmdn-admin-portal/node_modules/ra-core/src/controller/field/useReferenceOneFieldController.tsx"],"sourcesContent":["import get from 'lodash/get';\nimport { UseQueryOptions } from 'react-query';\n\nimport { useGetManyReference } from '../../dataProvider';\nimport { useNotify } from '../../notification';\nimport { RaRecord, SortPayload } from '../../types';\nimport { UseReferenceResult } from '../useReference';\n\nexport interface UseReferenceOneFieldControllerParams<\n    RecordType extends RaRecord = any\n> {\n    record?: RaRecord;\n    reference: string;\n    source?: string;\n    target: string;\n    sort?: SortPayload;\n    filter?: any;\n    queryOptions?: UseQueryOptions<{\n        data: RecordType[];\n        total: number;\n    }> & { meta?: any };\n}\n\n/**\n * Fetch a reference record in a one-to-one relationship, and return it when available\n *\n * The reference prop should be the name of one of the <Resource> components\n * added as <Admin> child.\n *\n * @example\n *\n * const { data, isLoading, error } = useReferenceOneFieldController({\n *     record: { id: 7, name: 'James Joyce'}\n *     reference: 'bios',\n *     target: 'author_id',\n * });\n *\n * @typedef {Object} UseReferenceOneFieldControllerParams\n * @prop {Object} props.record The current resource record\n * @prop {string} props.reference The linked resource name\n * @prop {string} props.target The target resource key\n * @prop {string} props.source The key current record identifier ('id' by default)\n * @prop {Object} props.sort The sort to apply to the referenced records\n * @prop {Object} props.filter The filter to apply to the referenced records\n * @returns {UseReferenceResult} The request state. Destructure as { referenceRecord, isLoading, error }.\n */\nexport const useReferenceOneFieldController = <\n    RecordType extends RaRecord = any\n>(\n    props: UseReferenceOneFieldControllerParams<RecordType>\n): UseReferenceResult<RecordType> => {\n    const {\n        reference,\n        record,\n        target,\n        source = 'id',\n        sort = { field: 'id', order: 'ASC' },\n        filter = {},\n        queryOptions = {},\n    } = props;\n    const notify = useNotify();\n    const { meta, ...otherQueryOptions } = queryOptions;\n\n    const { data, error, isFetching, isLoading, refetch } = useGetManyReference<\n        RecordType\n    >(\n        reference,\n        {\n            target,\n            id: get(record, source),\n            pagination: { page: 1, perPage: 1 },\n            sort,\n            filter,\n            meta,\n        },\n        {\n            enabled: !!record,\n            onError: error =>\n                notify(\n                    typeof error === 'string'\n                        ? error\n                        : error.message || 'ra.notification.http_error',\n                    {\n                        type: 'error',\n                        messageArgs: {\n                            _:\n                                typeof error === 'string'\n                                    ? error\n                                    : error && error.message\n                                    ? error.message\n                                    : undefined,\n                        },\n                    }\n                ),\n            ...otherQueryOptions,\n        }\n    );\n\n    return {\n        referenceRecord: data ? data[0] : undefined,\n        error,\n        isFetching,\n        isLoading,\n        refetch,\n    };\n};\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}