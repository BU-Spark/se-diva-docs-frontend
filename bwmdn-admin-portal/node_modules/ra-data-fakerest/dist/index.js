var S=Object.create;var f=Object.defineProperty,k=Object.defineProperties,q=Object.getOwnPropertyDescriptor,A=Object.getOwnPropertyDescriptors,F=Object.getOwnPropertyNames,v=Object.getOwnPropertySymbols,L=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var P=(n,o,e)=>o in n?f(n,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[o]=e,s=(n,o)=>{for(var e in o||(o={}))w.call(o,e)&&P(n,e,o[e]);if(v)for(var e of v(o))j.call(o,e)&&P(n,e,o[e]);return n},h=(n,o)=>k(n,A(o)),u=(n,o)=>f(n,"name",{value:o,configurable:!0});var x=(n,o)=>{for(var e in o)f(n,e,{get:o[e],enumerable:!0})},R=(n,o,e,c)=>{if(o&&typeof o=="object"||typeof o=="function")for(let i of F(o))!w.call(n,i)&&i!==e&&f(n,i,{get:()=>o[i],enumerable:!(c=q(o,i))||c.enumerable});return n};var D=(n,o,e)=>(e=n!=null?S(L(n)):{},R(o||!n||!n.__esModule?f(e,"default",{value:n,enumerable:!0}):e,n)),E=n=>R(f({},"__esModule",{value:!0}),n);var N={};x(N,{default:()=>J});module.exports=E(N);var C=D(require("fakerest"));function b(n,o,e,c){console.group?(console.groupCollapsed(n,o,JSON.stringify(e)),console.log(c),console.groupEnd()):(console.log("FakeRest request ",n,o,e),console.log("FakeRest response",c))}u(b,"log");var J=u((n,o=!1)=>{let e=new C.default.Server;e.init(n),typeof window<"u"&&(window.restServer=e);function c(d,t,l){switch(d){case"getList":{let{page:r,perPage:a}=l.pagination,{field:g,order:O}=l.sort,y={sort:[g,O],range:[(r-1)*a,r*a-1],filter:l.filter};return{data:e.getAll(t,y),total:e.getCount(t,{filter:l.filter})}}case"getOne":return{data:e.getOne(t,l.id,s({},l))};case"getMany":return{data:e.getAll(t,{filter:{id:l.ids}})};case"getManyReference":{let{page:r,perPage:a}=l.pagination,{field:g,order:O}=l.sort,y={sort:[g,O],range:[(r-1)*a,r*a-1],filter:h(s({},l.filter),{[l.target]:l.id})};return{data:e.getAll(t,y),total:e.getCount(t,{filter:y.filter})}}case"update":return{data:e.updateOne(t,l.id,s({},l.data))};case"updateMany":return l.ids.forEach(r=>e.updateOne(t,r,s({},l.data))),{data:l.ids};case"create":return{data:e.addOne(t,s({},l.data))};case"delete":return{data:e.removeOne(t,l.id)};case"deleteMany":return l.ids.forEach(r=>e.removeOne(t,r)),{data:l.ids};default:return!1}}u(c,"getResponse");let i=u((d,t,l)=>{if(!e.getCollection(t)&&d!=="create"){let g=new M(`Undefined collection "${t}"`);return g.code=1,Promise.reject(g)}let a;try{a=c(d,t,l)}catch(g){return console.error(g),Promise.reject(g)}return o&&b(d,t,l,a),Promise.resolve(a)},"handle");return{getList:(d,t)=>i("getList",d,t),getOne:(d,t)=>i("getOne",d,t),getMany:(d,t)=>i("getMany",d,t),getManyReference:(d,t)=>i("getManyReference",d,t),update:(d,t)=>i("update",d,t),updateMany:(d,t)=>i("updateMany",d,t),create:(d,t)=>i("create",d,t),delete:(d,t)=>i("delete",d,t),deleteMany:(d,t)=>i("deleteMany",d,t)}},"default"),M=class extends Error{};u(M,"UndefinedResourceError");0&&(module.exports={});
//# sourceMappingURL=index.js.map