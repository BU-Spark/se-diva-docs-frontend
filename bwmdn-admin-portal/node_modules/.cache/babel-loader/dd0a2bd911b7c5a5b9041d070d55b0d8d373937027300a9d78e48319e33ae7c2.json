{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport React from 'react';\nimport { useReferenceManyFieldController, useRecordContext, useTimeout, useCreatePath } from 'ra-core';\nimport { Typography, CircularProgress } from '@mui/material';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport { sanitizeFieldRestProps } from './sanitizeFieldRestProps';\nimport { Link } from '../Link';\n/**\n * Fetch and render the number of records related to the current one\n *\n * Relies on dataProvider.getManyReference() returning a total property\n *\n * @example // Display the number of comments for the current post\n * <ReferenceManyCount reference=\"comments\" target=\"post_id\">\n *\n * @example // Display the number of published comments for the current post\n * <ReferenceManyCount reference=\"comments\" target=\"post_id\" filter={{ is_published: true }}>\n *\n * @example // Display the number of comments for the current post, with a custom Typography variant\n * <ReferenceManyCount reference=\"comments\" target=\"post_id\" variant=\"h1\">\n */\nexport var ReferenceManyCount = function (props) {\n  var _a;\n  var reference = props.reference,\n    target = props.target,\n    filter = props.filter,\n    link = props.link,\n    resource = props.resource,\n    _b = props.source,\n    source = _b === void 0 ? 'id' : _b,\n    _c = props.timeout,\n    timeout = _c === void 0 ? 1000 : _c,\n    rest = __rest(props, [\"reference\", \"target\", \"filter\", \"link\", \"resource\", \"source\", \"timeout\"]);\n  var record = useRecordContext(props);\n  var oneSecondHasPassed = useTimeout(timeout);\n  var createPath = useCreatePath();\n  var _d = useReferenceManyFieldController({\n      filter: filter,\n      page: 1,\n      perPage: 1,\n      record: record,\n      reference: reference,\n      // @ts-ignore remove when #8491 is released\n      resource: resource,\n      source: source,\n      target: target\n    }),\n    isLoading = _d.isLoading,\n    error = _d.error,\n    total = _d.total;\n  var body = isLoading ? oneSecondHasPassed ? React.createElement(CircularProgress, {\n    size: 14\n  }) : '' : error ? React.createElement(ErrorIcon, {\n    color: \"error\",\n    fontSize: \"small\",\n    titleAccess: \"error\"\n  }) : total;\n  return link ?\n  // @ts-ignore TypeScript complains that the props for <a> aren't the same as for <span>\n  React.createElement(Link, __assign({\n    to: {\n      pathname: createPath({\n        resource: reference,\n        type: 'list'\n      }),\n      search: \"filter=\".concat(JSON.stringify(__assign(__assign({}, filter || {}), (_a = {}, _a[target] = record[source], _a))))\n    },\n    variant: \"body2\",\n    component: \"span\",\n    onClick: function (e) {\n      return e.stopPropagation();\n    }\n  }, rest), body) : React.createElement(Typography, __assign({\n    component: \"span\",\n    variant: \"body2\"\n  }, sanitizeFieldRestProps(rest)), body);\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SACIC,+BAA+B,EAC/BC,gBAAgB,EAChBC,UAAU,EACVC,aAAa,QACV,SAAS;AAChB,SAASC,UAAU,EAAmBC,gBAAgB,QAAQ,eAAe;AAC7E,OAAOC,SAAS,MAAM,2BAA2B;AAGjD,SAASC,sBAAsB,QAAQ,0BAA0B;AACjE,SAASC,IAAI,QAAQ,SAAS;AAE9B;;;;;;;;;;;;;;AAcA,OAAO,IAAMC,kBAAkB,GAAG,UAACC,KAA8B;;EAEzD,aAAS,GAQTA,KAAK,UARI;IACTC,MAAM,GAOND,KAAK,OAPC;IACNE,MAAM,GAMNF,KAAK,OANC;IACNG,IAAI,GAKJH,KAAK,KALD;IACJI,QAAQ,GAIRJ,KAAK,SAJG;IACRK,KAGAL,KAAK,OAHQ;IAAbM,MAAM,mBAAG,IAAI;IACbC,KAEAP,KAAK,QAFS;IAAdQ,OAAO,mBAAG,IAAI;IACXC,IAAI,UACPT,KAAK,EATH,0EASL,CADU;EAEX,IAAMU,MAAM,GAAGnB,gBAAgB,CAACS,KAAK,CAAC;EACtC,IAAMW,kBAAkB,GAAGnB,UAAU,CAACgB,OAAO,CAAC;EAC9C,IAAMI,UAAU,GAAGnB,aAAa,EAAE;EAE5B,SAA8BH,+BAA+B,CAAC;MAChEY,MAAM;MACNW,IAAI,EAAE,CAAC;MACPC,OAAO,EAAE,CAAC;MACVJ,MAAM;MACNK,SAAS;MACT;MACAX,QAAQ;MACRE,MAAM;MACNL,MAAM;KACT,CAAC;IAVMe,SAAS;IAAEC,KAAK;IAAEC,KAAK,WAU7B;EAEF,IAAMC,IAAI,GAAGH,SAAS,GAClBL,kBAAkB,GACdtB,oBAACM,gBAAgB;IAACyB,IAAI,EAAE;EAAE,EAAI,GAE9B,EACH,GACDH,KAAK,GACL5B,oBAACO,SAAS;IAACyB,KAAK,EAAC,OAAO;IAACC,QAAQ,EAAC,OAAO;IAACC,WAAW,EAAC;EAAO,EAAG,GAEhEL,KACH;EAED,OAAOf,IAAI;EACP;EACAd,oBAACS,IAAI;IACD0B,EAAE,EAAE;MACAC,QAAQ,EAAEb,UAAU,CAAC;QAAER,QAAQ,EAAEW,SAAS;QAAEW,IAAI,EAAE;MAAM,CAAE,CAAC;MAC3DC,MAAM,EAAE,iBAAUC,IAAI,CAACC,SAAS,uBACxB3B,MAAM,IAAI,EAAE,CAAC,eAChBD,MAAM,IAAGS,MAAM,CAACJ,MAAM,CAAC,OAC1B;KACL;IACDwB,OAAO,EAAC,OAAO;IACfC,SAAS,EAAC,MAAM;IAChBC,OAAO,EAAE,WAAC;MAAI,QAAC,CAACC,eAAe,EAAE;IAAnB;EAAmB,GAC7BxB,IAAI,GAEPU,IAAI,CACF,GAEP9B,oBAACK,UAAU;IACPqC,SAAS,EAAC,MAAM;IAChBD,OAAO,EAAC;EAAO,GACXjC,sBAAsB,CAACY,IAAI,CAAC,GAE/BU,IAAI,CAEZ;AACL,CAAC","names":["React","useReferenceManyFieldController","useRecordContext","useTimeout","useCreatePath","Typography","CircularProgress","ErrorIcon","sanitizeFieldRestProps","Link","ReferenceManyCount","props","target","filter","link","resource","_b","source","_c","timeout","rest","record","oneSecondHasPassed","createPath","page","perPage","reference","isLoading","error","total","body","size","color","fontSize","titleAccess","to","pathname","type","search","JSON","stringify","variant","component","onClick","stopPropagation"],"sources":["/Users/paigedeveau/Desktop/se-diva-docs-frontend/bwmdn-admin-portal/node_modules/ra-ui-materialui/src/field/ReferenceManyCount.tsx"],"sourcesContent":["import React from 'react';\nimport {\n    useReferenceManyFieldController,\n    useRecordContext,\n    useTimeout,\n    useCreatePath,\n} from 'ra-core';\nimport { Typography, TypographyProps, CircularProgress } from '@mui/material';\nimport ErrorIcon from '@mui/icons-material/Error';\n\nimport { PublicFieldProps, InjectedFieldProps } from './types';\nimport { sanitizeFieldRestProps } from './sanitizeFieldRestProps';\nimport { Link } from '../Link';\n\n/**\n * Fetch and render the number of records related to the current one\n *\n * Relies on dataProvider.getManyReference() returning a total property\n *\n * @example // Display the number of comments for the current post\n * <ReferenceManyCount reference=\"comments\" target=\"post_id\">\n *\n * @example // Display the number of published comments for the current post\n * <ReferenceManyCount reference=\"comments\" target=\"post_id\" filter={{ is_published: true }}>\n *\n * @example // Display the number of comments for the current post, with a custom Typography variant\n * <ReferenceManyCount reference=\"comments\" target=\"post_id\" variant=\"h1\">\n */\nexport const ReferenceManyCount = (props: ReferenceManyCountProps) => {\n    const {\n        reference,\n        target,\n        filter,\n        link,\n        resource,\n        source = 'id',\n        timeout = 1000,\n        ...rest\n    } = props;\n    const record = useRecordContext(props);\n    const oneSecondHasPassed = useTimeout(timeout);\n    const createPath = useCreatePath();\n\n    const { isLoading, error, total } = useReferenceManyFieldController({\n        filter,\n        page: 1,\n        perPage: 1,\n        record,\n        reference,\n        // @ts-ignore remove when #8491 is released\n        resource,\n        source,\n        target,\n    });\n\n    const body = isLoading ? (\n        oneSecondHasPassed ? (\n            <CircularProgress size={14} />\n        ) : (\n            ''\n        )\n    ) : error ? (\n        <ErrorIcon color=\"error\" fontSize=\"small\" titleAccess=\"error\" />\n    ) : (\n        total\n    );\n\n    return link ? (\n        // @ts-ignore TypeScript complains that the props for <a> aren't the same as for <span>\n        <Link\n            to={{\n                pathname: createPath({ resource: reference, type: 'list' }),\n                search: `filter=${JSON.stringify({\n                    ...(filter || {}),\n                    [target]: record[source],\n                })}`,\n            }}\n            variant=\"body2\"\n            component=\"span\"\n            onClick={e => e.stopPropagation()}\n            {...rest}\n        >\n            {body}\n        </Link>\n    ) : (\n        <Typography\n            component=\"span\"\n            variant=\"body2\"\n            {...sanitizeFieldRestProps(rest)}\n        >\n            {body}\n        </Typography>\n    );\n};\n\nexport interface ReferenceManyCountProps\n    extends PublicFieldProps,\n        InjectedFieldProps,\n        Omit<TypographyProps, 'textAlign'> {\n    reference: string;\n    target: string;\n    filter?: any;\n    label?: string;\n    link?: boolean;\n    resource?: string;\n    source?: string;\n    timeout?: number;\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}