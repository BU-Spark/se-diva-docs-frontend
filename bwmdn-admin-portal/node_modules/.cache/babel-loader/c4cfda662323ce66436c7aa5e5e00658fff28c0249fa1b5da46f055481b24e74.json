{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport * as React from 'react';\nimport { useResourceContext, usePreference, useStore, useTranslate } from 'ra-core';\nimport { Configurable } from '../preferences';\nimport { SimpleForm } from './SimpleForm';\nimport { SimpleFormEditor } from './SimpleFormEditor';\nexport var SimpleFormConfigurable = function (_a) {\n  var preferenceKey = _a.preferenceKey,\n    omit = _a.omit,\n    props = __rest(_a, [\"preferenceKey\", \"omit\"]);\n  var translate = useTranslate();\n  var resource = useResourceContext(props);\n  var finalPreferenceKey = preferenceKey || \"\".concat(resource, \".simpleForm\");\n  var _b = useStore(\"preferences.\".concat(finalPreferenceKey, \".availableInputs\"), []),\n    availableInputs = _b[0],\n    setAvailableInputs = _b[1];\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  var _c = useStore(\"preferences.\".concat(finalPreferenceKey, \".omit\"), omit),\n    _ = _c[0],\n    setOmit = _c[1];\n  React.useEffect(function () {\n    // first render, or the preference have been cleared\n    var inputs = React.Children.map(props.children, function (child, index) {\n      return React.isValidElement(child) ? {\n        index: String(index),\n        source: child.props.source,\n        label: child.props.source || child.props.label ? child.props.label : translate('ra.configurable.SimpleForm.unlabeled', {\n          input: index,\n          _: \"Unlabeled input #%{input}\"\n        })\n      } : null;\n    }).filter(function (column) {\n      return column != null;\n    });\n    if (inputs.length !== availableInputs.length) {\n      setAvailableInputs(inputs);\n      setOmit(omit);\n    }\n  }, [availableInputs]); // eslint-disable-line react-hooks/exhaustive-deps\n  return React.createElement(Configurable, {\n    editor: React.createElement(SimpleFormEditor, null),\n    preferenceKey: finalPreferenceKey,\n    sx: {\n      display: 'block',\n      '&.RaConfigurable-editMode': {\n        margin: '2px'\n      }\n    }\n  }, React.createElement(SimpleFormWithPreferences, __assign({}, props)));\n};\n/**\n * This SimpleForm filters its children depending on preferences\n */\nvar SimpleFormWithPreferences = function (_a) {\n  var children = _a.children,\n    props = __rest(_a, [\"children\"]);\n  var availableInputs = usePreference('availableInputs', [])[0];\n  var omit = usePreference('omit', [])[0];\n  var inputs = usePreference('inputs', availableInputs.filter(function (input) {\n    return !(omit === null || omit === void 0 ? void 0 : omit.includes(input.source));\n  }).map(function (input) {\n    return input.index;\n  }))[0];\n  var childrenArray = React.Children.toArray(children);\n  return React.createElement(SimpleForm, __assign({}, props), inputs === undefined ? children : inputs.map(function (index) {\n    return childrenArray[index];\n  }));\n};","map":{"version":3,"mappings":"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","names":["React","useResourceContext","usePreference","useStore","useTranslate","Configurable","SimpleForm","SimpleFormEditor","SimpleFormConfigurable","_a","omit","props","translate","resource","finalPreferenceKey","preferenceKey","availableInputs","setAvailableInputs","_","setOmit","useEffect","inputs","Children","map","children","child","index","isValidElement","String","source","label","input","filter","length","editor","sx","display","margin","SimpleFormWithPreferences","includes","childrenArray","toArray","undefined"],"sources":["/Users/paigedeveau/Desktop/se-diva-docs-frontend/bwmdn-admin-portal/node_modules/ra-ui-materialui/src/form/SimpleFormConfigurable.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n    useResourceContext,\n    usePreference,\n    useStore,\n    useTranslate,\n} from 'ra-core';\n\nimport { Configurable } from '../preferences';\nimport { SimpleForm, SimpleFormProps } from './SimpleForm';\nimport { SimpleFormEditor } from './SimpleFormEditor';\n\nexport const SimpleFormConfigurable = ({\n    preferenceKey,\n    omit,\n    ...props\n}: SimpleFormConfigurableProps) => {\n    const translate = useTranslate();\n    const resource = useResourceContext(props);\n    const finalPreferenceKey = preferenceKey || `${resource}.simpleForm`;\n\n    const [availableInputs, setAvailableInputs] = useStore<\n        SimpleFormConfigurableColumn[]\n    >(`preferences.${finalPreferenceKey}.availableInputs`, []);\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const [_, setOmit] = useStore<string[]>(\n        `preferences.${finalPreferenceKey}.omit`,\n        omit\n    );\n\n    React.useEffect(() => {\n        // first render, or the preference have been cleared\n        const inputs = React.Children.map(props.children, (child, index) =>\n            React.isValidElement(child)\n                ? {\n                      index: String(index),\n                      source: child.props.source,\n                      label:\n                          child.props.source || child.props.label\n                              ? child.props.label\n                              : translate(\n                                    'ra.configurable.SimpleForm.unlabeled',\n                                    {\n                                        input: index,\n                                        _: `Unlabeled input #%{input}`,\n                                    }\n                                ),\n                  }\n                : null\n        ).filter(column => column != null);\n        if (inputs.length !== availableInputs.length) {\n            setAvailableInputs(inputs);\n            setOmit(omit);\n        }\n    }, [availableInputs]); // eslint-disable-line react-hooks/exhaustive-deps\n\n    return (\n        <Configurable\n            editor={<SimpleFormEditor />}\n            preferenceKey={finalPreferenceKey}\n            sx={{\n                display: 'block',\n                '&.RaConfigurable-editMode': {\n                    margin: '2px',\n                },\n            }}\n        >\n            <SimpleFormWithPreferences {...props} />\n        </Configurable>\n    );\n};\n\nexport interface SimpleFormConfigurableProps extends SimpleFormProps {\n    /**\n     * Key to use to store the user's preferences for this SimpleForm.\n     *\n     * Set to '[resource].simpleForm' by default. Pass a custom key if you need\n     * to display more than one SimpleFormConfigurable per resource.\n     */\n    preferenceKey?: string;\n    /**\n     * columns to hide by default\n     *\n     * @example\n     * // by default, hide the id and author columns\n     * // users can choose to show show them in configuration mode\n     * const PostEdit = () => (\n     *     <Edit>\n     *         <SimpleFormConfigurable omit={['id', 'author']}>\n     *             <TextInput source=\"id\" />\n     *             <TextInput source=\"title\" />\n     *             <TextInput source=\"author\" />\n     *             <TextInput source=\"year\" />\n     *         </SimpleFormConfigurable>\n     *     </Edit>\n     * );\n     */\n    omit?: string[];\n}\n\nexport interface SimpleFormConfigurableColumn {\n    index: string;\n    source: string;\n    label?: string;\n}\n\n/**\n * This SimpleForm filters its children depending on preferences\n */\nconst SimpleFormWithPreferences = ({ children, ...props }: SimpleFormProps) => {\n    const [availableInputs] = usePreference('availableInputs', []);\n    const [omit] = usePreference('omit', []);\n    const [inputs] = usePreference(\n        'inputs',\n        availableInputs\n            .filter(input => !omit?.includes(input.source))\n            .map(input => input.index)\n    );\n    const childrenArray = React.Children.toArray(children);\n    return (\n        <SimpleForm {...props}>\n            {inputs === undefined\n                ? children\n                : inputs.map(index => childrenArray[index])}\n        </SimpleForm>\n    );\n};\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}